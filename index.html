<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Cafeter√≠a UATV</title>

<style>
body{
    font-family: Arial, sans-serif;
    margin:0;
    background:#f3ede7;
}

/* ENCABEZADO */
header{
    background:#5d4037;
    padding:12px;
    text-align:center;
    color:white;
}

/* CONTENEDOR */
.container{
    display:flex;
}

/* SIDEBAR */
.sidebar{
    width:135px;
    background:#8d6e63;
    padding:8px;
}

.sidebar button{
    width:100%;
    margin-bottom:8px;
    padding:8px;
    border:none;
    cursor:pointer;
    font-weight:bold;
    color:white;
    background:#6d4c41;
    border-radius:6px;
}

.sidebar button:hover{
    background:#4e342e;
}

/* CONTENIDO */
.content{
    padding:15px;
    flex:1;
}

/* SECCIONES */
.section{
    margin-bottom:20px;
}

.hidden{
    display:none;
}

/* CATEGOR√çAS */
.category{
    margin-bottom:20px;
}

.category h4{
    background:#d7ccc8;
    padding:6px;
    border-radius:5px;
    color:#4e342e;
}

/* TARJETAS */
.cards{
    display:grid;
    grid-template-columns: repeat(auto-fit, minmax(150px,1fr));
    gap:12px;
}

.card{
    background:white;
    border-radius:12px;
    padding:10px;
    text-align:center;
    box-shadow:0 4px 8px rgba(0,0,0,.12);
    transition:transform .2s;
}

.card:hover{
    transform:scale(1.03);
}

.card img{
    width:100%;
    height:90px;
    object-fit:contain;
}

.price{
    font-weight:bold;
    color:#2e7d32;
}

.btn-mini{
    background:#81c784;
    color:#1b5e20;
    border:none;
    padding:6px 12px;
    cursor:pointer;
    border-radius:20px;
    font-size:12px;
    margin-top:6px;
}

.order-item{
    background:white;
    padding:10px;
    margin-bottom:8px;
    display:flex;
    justify-content:space-between;
    border-radius:8px;
}

.total{
    font-size:18px;
    font-weight:bold;
    margin-top:12px;
}

@media print {
    body * { visibility:hidden; }
    #ticket, #ticket * { visibility:visible; }
    #ticket { position:absolute; left:0; top:0; width:100%; }
}
</style>
</head>

<body>

<header>
<h2>CAFETER√çA UATV</h2>
</header>

<div class="container">

<div class="sidebar">
<button onclick="mostrar('menu')">MEN√ö</button>
<button onclick="mostrar('pedidos')">PEDIDOS</button>
<button onclick="mostrar('ticket')">TICKET</button>
</div>

<div class="content">

<!-- MEN√ö -->
<div id="menu" class="section">

<h3>Men√∫</h3>

<div class="category">
<h4>Desayunos</h4>
<div class="cards">
<div class="card">
<img src="cafe.JPG">
<h5>Caf√©</h5>
<div class="price">$20</div>
<button class="btn-mini" onclick="agregar('Caf√©',20)">Agregar</button>
</div>

<div class="card">
<img src="pan.jpeg">
<h5>Pan</h5>
<div class="price">$15</div>
<button class="btn-mini" onclick="agregar('Pan',15)">Agregar</button>
</div>

<div class="card">
<img src="huevo.jpeg">
<h5>Huevos al gusto</h5>
<div class="price">$40</div>
<button class="btn-mini" onclick="agregar('Huevos al gusto',40)">Agregar</button>
</div>
</div>
</div>
<div class="category">
<h4>Comida</h4>
<div class="cards">
<div class="card">
<img src="OIP.jpeg">
<h5>Cecina</h5>
<div class="price">$60</div>
<button class="btn-mini" onclick="agregar('Cecina',60)">Agregar</button>
</div>

<div class="card">
<img src="tacos.jpg">
<h5>Tacos</h5>
<div class="price">$35</div>
<button class="btn-mini" onclick="agregar('Tacos',35)">Agregar</button>
</div>

<div class="card">
<img src="enchiladas.jpeg">
<h5>Enchiladas</h5>
<div class="price">$35</div>
<button class="btn-mini" onclick="agregar('Enchiladas',35)">Agregar</button>
</div>
</div>
</div>
<div class="category">
<h4>Bebidas</h4>
<div class="cards">
<div class="card">
<img src="refrescos.jpg">
<h5>Refresco</h5>
<div class="price">$18</div>
<button class="btn-mini" onclick="agregar('Refresco',18)">Agregar</button>
</div>

<div class="card">
<img src="agua.jpeg">
<h5>Agua</h5>
<div class="price">$12</div>
<button class="btn-mini" onclick="agregar('Agua',12)">Agregar</button>
</div>

<div class="card">
<img src="aguafresca.jpeg">
<h5>Agua fresca</h5>
<div class="price">$25</div>
<button class="btn-mini" onclick="agregar('Agua fresca',25)">Agregar</button>
</div>
</div>
</div>
</div>

<!-- PEDIDOS -->
<div id="pedidos" class="section hidden">
<h3>Pedidos</h3>
<div id="listaPedidos"></div>
</div>

<!-- TICKET -->
<div id="ticket" class="section hidden">
<h3>Ticket</h3>

<p><b>Pedido No:</b> <span id="numPedido"></span></p>

<p><b>Fecha:</b> <span id="fecha"></span></p>
<p><b>Hora:</b> <span id="hora"></span></p>

<div id="listaTicket"></div>
<div class="total">Total: $<span id="total">0</span></div>

<button class="btn-mini" onclick="finalizarPedido()">Finalizar pedido</button>
<button class="btn-mini" onclick="imprimirTicket()">Imprimir ticket</button>
</div>

</div>
</div>
<script>
let pedidos = [];

/* =========================
   FOLIO INCREMENTAL REAL
========================= */
let numeroPedido = localStorage.getItem("folio")
    ? parseInt(localStorage.getItem("folio"))
    : 1;


/* =========================
   MOSTRAR SECCIONES
========================= */
function mostrar(id){
    document.getElementById('menu').classList.add('hidden');
    document.getElementById('pedidos').classList.add('hidden');
    document.getElementById('ticket').classList.add('hidden');
    document.getElementById(id).classList.remove('hidden');

    if(id === 'ticket'){
        actualizarFechaHora();

        // üëâ formato 0001, 0002, 0003
        document.getElementById("numPedido").textContent =
            String(numeroPedido).padStart(4,'0');
    }
}


/* =========================
   AGREGAR PRODUCTOS
========================= */
function agregar(nombre, precio){
    pedidos.push({nombre,precio});
    actualizar();
}


/* =========================
   ELIMINAR
========================= */
function eliminar(index){
    pedidos.splice(index,1);
    actualizar();
}


/* =========================
   ACTUALIZAR LISTAS
========================= */
function actualizar(){
    let listaPedidos = document.getElementById('listaPedidos');
    let listaTicket = document.getElementById('listaTicket');
    let total = 0;

    listaPedidos.innerHTML='';
    listaTicket.innerHTML='';

    pedidos.forEach((p,i)=>{
        total += p.precio;

        listaPedidos.innerHTML += `
        <div class="order-item">
            ${p.nombre} $${p.precio}
            <button class="btn-mini" onclick="eliminar(${i})">X</button>
        </div>`;

        listaTicket.innerHTML += `
        <div class="order-item">
            ${p.nombre} $${p.precio}
        </div>`;
    });

    document.getElementById('total').textContent = total;
}


/* =========================
   FECHA Y HORA
========================= */
function actualizarFechaHora(){
    const ahora = new Date();
    document.getElementById("fecha").textContent = ahora.toLocaleDateString();
    document.getElementById("hora").textContent = ahora.toLocaleTimeString();
}


/* =========================
   FINALIZAR PEDIDO (INCREMENTAL PRO)
========================= */
function finalizarPedido(){
    if(pedidos.length === 0){
        alert("No hay productos en el pedido");
        return;
    }

    alert("Pedido #" + numeroPedido + " finalizado con √©xito");

    // üî• incrementa
    numeroPedido++;

    // üî• guarda permanente
    localStorage.setItem("folio", numeroPedido);

    pedidos = [];
    actualizar();
    mostrar('menu');
}


/* =========================
   IMPRIMIR
========================= */
function imprimirTicket(){
    if(pedidos.length === 0){
        alert("No hay ticket para imprimir");
        return;
    }
    window.print();
}
</script>

</body>
</html>









